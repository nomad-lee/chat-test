<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.buckwheat.chat.mapper.ChatMapper">
	<!-- 채팅 메세지 저장 -->
	<insert id="insertChattingMsg" parameterType="java.util.Map">
		INSERT INTO chatting (
			chating_room_no
			chatting_memo
			, createdate
		) VALUES (
			#{chattingRoomNo}
			#{chattingMemo}
			, NOW()
		)
	</insert>
	
	<!-- 채팅 메시지 리스트 -->
	<select id="selectChaatingList" parameterType="int" resultType="java.util.Map">
		SELECT
			chatting_room_no chattingRoomNo
			, chatting_no chattingNo
			, chatting_memo chattingMemo
			, createdate
			, from_id fromId
		FROM chatting
		WHERE chatting_room_no = "#{chattingRoomNo}"
	</select>
	
	<!-- 채팅방 생성하기 -->
	<insert id="insertChattingRoom" parameterType="string">
		INSERT INTO
			chatting_room (
			createdate
			, updatedate
		) VALUES (
			NOW()
			, NOW()
		)
	</insert>
	
	<!-- 채팅방 리스트 -->
	<select id="selectChattingRoomList" parameterType="java.util.Map" resultType="java.util.Map">
		SELECT
			chatting_room_no chattingRoomNo
			, updatedate
		FROM
			chatting_room
		ORDER BY
			chatting_room_no desc
	</select>
</mapper>